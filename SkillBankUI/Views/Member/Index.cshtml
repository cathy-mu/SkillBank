@model SkillBank.Site.Web.ViewModel.DashboardModel
@section HeaderStyle {@Html.CombresCustomUrl("dashboardCss")}
@section FooterJs {@Html.CombresCustomUrl("dashboardJs")}
<!--Member self view only / mypage-->
<div class="body">
    <div class="inner">

        <div class="mypage">

            <div class="mypage-hd">
                <h2>@Html.GetTrans(165)</h2>
            </div>

            <div class="mypage-bd">
                @if (ViewBag.MemberInfo != null)
                {  
                    <table class="table-layout">
                        <tr>

                            <td class="mypage-side">

                                <div class="mypage-me">
                                    <div class="spaced-larger">
                                        <a href="@Url.Action("photo", "member")">
                                            <img src="@ContentHelper.GetAvatarPath(ViewBag.MemberInfo.Avatar, "h")"></a>
                                    </div>
                                    <h3>@ViewBag.MemberInfo.Name</h3>
                                    <div><a href="@Url.Action("info", "member")">@Html.GetTrans(377)</a></div>
                                </div>
                                <!-- end of my profile -->

                                <div class="mypage-classcoin">
                                    <a href="#" class="btn-helper" data-toggle="tooltip" title="@Html.GetTrans(379)"><i class="fa fa-question-circle"></i></a>
                                    <h4><i class="fa fa-lock"></i><em>@ViewBag.MemberInfo.CoinsLocked</em>@Html.GetTrans(378)</h4>
                                    <div class="classcoin-badge">
                                        <div class="classcoin-number">@ViewBag.MemberInfo.Coins</div>
                                        <h3>@Html.GetTrans(380)</h3>
                                    </div>
                                </div>
                                <!-- end of my class coin -->
                                <!--<div class="mypage-verification">
                                    <div class="row-fluid spaced-large">
                                        <div class="span9">
                                            <h4>@Html.GetTrans(381)</h4>
                                        </div>
                                        <div class="span3 tright"><a href="#"><i class="fa fa-plus-circle orange-deep icon-large"></i>@Html.GetTrans(382)</a></div>
                                    </div>
                                    <div class="row-fluid spaced-large">
                                        <div class="span6">@Html.GetTrans(227)</div>
                                        <div class="span6 tright"><span class="gray-light">@Html.GetTrans(235)</span></div>
                                    </div>
                                    <div class="row-fluid spaced-large">
                                        <div class="span6">@Html.GetTrans(385)</div>
                                        <div class="span6 tright"><span class="gray-light">@ContentHelper.GetPrivateInfo(ViewBag.MemberInfo.Phone, 2)</span></div>
                                    </div>
                                    
                                    <div class="row-fluid spaced-large">
                                        <div class="span6">@Html.GetTrans(386)</div>
                                        <div class="span6 tright"><span class="gray-light">@Html.GetTrans(388)</span></div>
                                    </div>
                                    
                                    <div class="row-fluid">
                                        <div class="span6">@Html.GetTrans(387)</div>
                                        <div class="span6 tright"><span class="gray-light">97%</span></div>
                                    </div>
                                </div>
                                -->
                                <!-- end of trust and verification -->

                            </td>

                            @if (Model != null)
                            {
                                <td class="mypage-main">
                                    <div class="mypage-intro">
                                        <!--<span class="coinintro-remove"><i class="fa fa-times"></i></span>-->
                                        <!---->

                                        <div id="coin-intro" class="carousel slide" data-ride="carousel" data-interval="0">

                                            <!-- Indicators -->
                                            <ol class="carousel-indicators">
                                                @if (ViewBag.ShowQRCode)
                                                {
                                                    <li data-target="#coin-intro" data-slide-to="0" class="active"></li>
                                                    <li data-target="#coin-intro" data-slide-to="1"></li>
                                                    <li data-target="#coin-intro" data-slide-to="2"></li>
                                                }
                                                else
                                                {
                                                    <li data-target="#coin-intro" data-slide-to="0" class="active"></li>
                                                    <li data-target="#coin-intro" data-slide-to="1"></li>
                                                }
                                            </ol>

                                            <!-- Wrapper for slides -->
                                            <div class="carousel-inner">
                                                @if (ViewBag.ShowQRCode)
                                                {
                                                    <div class="mypage-mobilesite item active">
                                                        <div class="row-fluid">
                                                            <div class="span8 mobilesite-img"></div>
                                                            <div class="span4 mobilesite-qrlogin">
                                                                <div class="mobilesite-qrstep1">
                                                                    <p class="mobilesite-intro1">技能银行手机网站已完全上线</p>
                                                                    <p class="mobilesite-intro2">更多功能都在手机端等你发现</p>
                                                                    <a href="#" class="btn btn-primary qacode-trigger">生成技能银行微信绑定二维码</a>
                                                                </div>
                                                                <div class="mobilesite-qrstep2">
                                                                    <p class="mobilesite-intro1">请使用手机微信扫描二维码</p>
                                                                    <p class="mobilesite-intro2">进入技能银行微信服务号</p>
                                                                    <img id="qrcode-img" data-src="@ViewBag.QRCodeURL" src="@ViewBag.QRCodeURL" width="150"/>
                                                                </div>
                                                                <div class="mobilesite-qrstep3">
                                                                    <span class="icon icon-circle-overview success"></span>
                                                                    <p class="mobilesite-intro1">微信账号已成功绑定</p>
                                                                    <p class="mobilesite-intro2">可以直接用微信登录手机网站了</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }
                                                <div class="mypage-getcoinintro item @(ViewBag.ShowQRCode ? "" : "active") ">
                                                    <h3>@Html.GetTrans(666)</h3>
                                                    <h5>@Html.GetTrans(667)</h5>
                                                    <div class="row-fluid">
                                                        @if (ViewBag.MemberInfo.MemberId > 1847 && ViewBag.MemberInfo.MemberId < 1934)
                                                        {
                                                            <div class="span3">
                                                                <div class="coinblock">@Html.GetTrans(668)<span>+1</span></div>@Html.GetTrans(672)
                                                            </div>
                                                        }
                                                        else
                                                        {
                                                            <div class="span3">
                                                                <div class="coinblock">@Html.GetTrans(665)<span>+1</span></div>@Html.GetTrans(676)
                                                                @if (!ViewBag.IsMobileVerified)
                                                                {
                                                                    <div><a href="#" role="button" class="btn btn-warning" id="getcoinintro-verifybtn">@Html.GetTrans(677)</a></div>
                                                                }
                                                            </div>
                                                        }
                                                        <div class="span3">
                                                            <div class="coinblock">@Html.GetTrans(669)<span>+1</span></div>@Html.GetTrans(673)
                                                        </div>
                                                        <div class="span3">
                                                            <div class="coinblock">@Html.GetTrans(670)<span>+2</span></div>@Html.GetTrans(674)
                                                        </div>
                                                        <div class="span3">
                                                            <div class="coinblock">@Html.GetTrans(671)<span>+N</span></div>@Html.GetTrans(675)
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="mypage-getcoinintro item">
                                                    <h3>@Html.GetTrans(678)</h3>
                                                    <h5>&nbsp;</h5>
                                                    <div class="row-fluid">
                                                        <div class="span3">
                                                            <div class="coinblock">@Html.GetTrans(679)<span>+</span></div>
                                                            你可以使用课币来<br />
                                                            预订感兴趣的课程

                                                        </div>
                                                        <div class="span3">
                                                            <div class="coinblock">@Html.GetTrans(680)<span>+</span></div>@Html.GetTrans(683)
                                                        </div>
                                                        <div class="span3">
                                                            <div class="coinblock">@Html.GetTrans(681)<span>+</span></div>@Html.GetTrans(684)

                                                        </div>
                                                        <div class="span3">
                                                            <div class="coinblock lastcoinblock"><span>+</span></div>
                                                            我们将会给课币<br />
                                                            赋予更多的价值哦

                                                        </div>
                                                    </div>
                                                </div>



                                            </div>
                                        </div>
                                    </div>
                                    <!-- end of share skill block -->
                                    <!--Class Notifications-->
                                    @if (Model.ClassNotifications != null && Model.ClassNotifications.Count > 0)
                                    {
                                        <div class="mypage-notifications">
                                            <h3>@Html.GetTrans(654)</h3>
                                            @foreach (var notificationItem in Model.ClassNotifications)
                                            {
                                                if (notificationItem.TypeId == 2)
                                                {
                                                <div class="notification-item highlight">
                                                    <div class="row-fluid">
                                                        <div class="span8"><i class="fa fa-exclamation-circle"></i>@TextContentHelper.ReplaeceBlurbParameterWithSubText(390, notificationItem.Title, 10, 560)</div>
                                                        <div class="span4 tright"><a href="@Url.Action("edit", "class", new { id = notificationItem.ClassOrderId })" class="btn btn-primary">@Html.GetTrans(391)</a></div>
                                                    </div>
                                                </div>
                                                }
                                                else if (notificationItem.TypeId == 3)
                                                {
                                                <div class="notification-item highlight">
                                                    <div class="row-fluid" id="dashboard-shareclass">
                                                        <div class="span6"><i class="fa fa-share-alt"></i>@TextContentHelper.ReplaeceBlurbParameterWithSubText(403, notificationItem.Title, 10, 560) @Html.GetTrans(695)</div>
                                                        <div class="span6 tright">
                                                            <div class="rollover-sharing">
                                                                <a href="#" class="btn btn-primary class-share" data-title="@notificationItem.Name" data-classid="@notificationItem.ClassOrderId">@Html.GetTrans(453)</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                }
                                                else if (notificationItem.TypeId == 4)
                                                {
                                                <div class="notification-item highlight">
                                                    <div class="row-fluid">
                                                        <div class="span6"><i class="fa fa-exclamation-circle"></i>@TextContentHelper.ReplaeceBlurbParameterWithSubText(619, notificationItem.Title, 10, 560)</div>
                                                        <div class="span6 tright">
                                                            <div class="rollover-sharing">
                                                                <a href="@Url.Action("edit", "class", new { id = notificationItem.ClassOrderId })" class="btn btn-primary">@Html.GetTrans(620)</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                }
                                            }
                                        </div>
                                    }
                                    <!--Order Notifications-->

                                    @if (Model.OrderNotifications != null && Model.OrderNotifications.Count > 0)
                                    {
                                        <div class="mypage-notifications">
                                            <h3>@Html.GetTrans(653)<span class="notify-clear"><i class="fa fa-times"></i>&nbsp;@Html.GetTrans(655)</span></h3>
                                            @foreach (var notificationItem in Model.OrderNotifications)
                                            {
                                                if (notificationItem.TypeId == 11)
                                                {
                                                <div class="notification-item">
                                                    <div class="row-fluid">
                                                        <div class="span8"><i class="fa fa-flag-o"></i>@Html.Raw(TextContentHelper.ReplaeceBlurbParaWithHighLightText(656, notificationItem.Name, notificationItem.Title, "theme-darkblue"))</div>
                                                        <div class="span4 tright"><a href="@Url.Action("teach", "member")" class="btn btn-primary">去处理</a>&nbsp;<span class="notify-remove" data-id="@notificationItem.NotificationId"><i class="fa fa-times"></i></span></div>
                                                    </div>
                                                </div>
                                                }
                                                else if (notificationItem.TypeId == 12)
                                                {
                                                <div class="notification-item">
                                                    <div class="row-fluid">
                                                        <div class="span8"><i class="fa fa-flag-o"></i>@Html.Raw(TextContentHelper.ReplaeceBlurbParaWithHighLightText(657, notificationItem.Title, notificationItem.Name, "theme-darkblue"))</div>
                                                        <div class="span4 tright">
                                                            <!--<span class="label label-warning label-booking">@Html.GetTrans(607)</span>&nbsp;-->
                                                            <span class="notify-remove" data-id="@notificationItem.NotificationId"><i class="fa fa-times"></i></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                }
                                                else if (notificationItem.TypeId == 13 || notificationItem.TypeId == 20)
                                                {
                                                <div class="notification-item">
                                                    <div class="row-fluid">
                                                        <div class="span8"><i class="fa fa-flag-o"></i>@Html.Raw(TextContentHelper.ReplaeceBlurbParaWithHighLightText(658, notificationItem.Name, notificationItem.Title, "theme-darkblue"))</div>
                                                        <div class="span4 tright">
                                                            <!--<span class="label label-warning label-booking">@Html.GetTrans(445)</span>&nbsp;-->
                                                            <span class="notify-remove" data-id="@notificationItem.NotificationId"><i class="fa fa-times"></i></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                }
                                                else if (notificationItem.TypeId == 14)
                                                {
                                                <div class="notification-item">
                                                    <div class="row-fluid">
                                                        <div class="span8"><i class="fa fa-flag-o"></i>@Html.Raw(TextContentHelper.ReplaeceBlurbParaWithHighLightText(659, notificationItem.Title, notificationItem.Name, "theme-darkblue"))</div>
                                                        <div class="span4 tright">
                                                            <!--<span class="label label-success label-accepted">@Html.GetTrans(394)</span>-->
                                                            <span class="notify-remove" data-id="@notificationItem.NotificationId"><i class="fa fa-times"></i></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                }
                                                else if (notificationItem.TypeId == 10)
                                                {
                                                <div class="notification-item">
                                                    <div class="row-fluid">
                                                        <div class="span8"><i class="fa fa-flag-o"></i>@Html.Raw(TextContentHelper.ReplaeceBlurbParaWithHighLightText(660, notificationItem.Title, "", "theme-darkblue"))</div>
                                                        <div class="span4 tright"><a href="@Url.Action("teach", "member")" class="btn btn-primary">@Html.GetTrans(402)</a>&nbsp;<span class="notify-remove" data-id="@notificationItem.NotificationId"><i class="fa fa-times"></i></span></div>
                                                    </div>
                                                </div>
                                                }
                                                else if (notificationItem.TypeId == 15)
                                                {
                                                <div class="notification-item">
                                                    <div class="row-fluid">
                                                        <div class="span8"><i class="fa fa-flag-o"></i>@Html.Raw(TextContentHelper.ReplaeceBlurbParaWithHighLightText(661, notificationItem.Title, "", "theme-darkblue"))</div>
                                                        <div class="span4 tright"><a href="@Url.Action("learn", "member")" class="btn btn-primary">@Html.GetTrans(400)</a>&nbsp;<span class="notify-remove" data-id="@notificationItem.NotificationId"><i class="fa fa-times"></i></span></div>
                                                    </div>
                                                </div>
                                                }
                                                else if (notificationItem.TypeId == 16)
                                                {
                                                <div class="notification-item">
                                                    <div class="row-fluid">
                                                        <div class="span8"><i class="fa fa-flag-o"></i>@Html.Raw(TextContentHelper.ReplaeceBlurbParaWithHighLightText(662, notificationItem.Name, notificationItem.Title, "theme-darkblue"))</div>
                                                        <div class="span4 tright"><a href="@Url.Action("teach", "member")" class="btn btn-primary">去处理</a>&nbsp;<span class="notify-remove" data-id="@notificationItem.NotificationId"><i class="fa fa-times"></i></span></div>
                                                    </div>
                                                </div>
                                                }
                                                else if (notificationItem.TypeId == 17)
                                                {
                                                <div class="notification-item">
                                                    <div class="row-fluid">
                                                        <div class="span8"><i class="fa fa-flag-o"></i>@Html.Raw(TextContentHelper.ReplaeceBlurbParaWithHighLightText(663, notificationItem.Title, notificationItem.Name, "theme-darkblue"))</div>
                                                        <div class="span4 tright">
                                                            <!--<span class="label label-warning label-booking">@Html.GetTrans(457)</span>&nbsp;-->
                                                            <span class="notify-remove" data-id="@notificationItem.NotificationId"><i class="fa fa-times"></i></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                }
                                                else if (notificationItem.TypeId == 18)
                                                {
                                                <div class="notification-item">
                                                    <div class="row-fluid">
                                                        <div class="span8"><i class="fa fa-flag-o"></i>@Html.Raw(TextContentHelper.ReplaeceBlurbParaWithHighLightText(664, notificationItem.Title, notificationItem.Name, "theme-darkblue"))</div>
                                                        <div class="span4 tright">
                                                            <!--<span class="label label-danger label-refund">@Html.GetTrans(604)</span>&nbsp;-->
                                                            <span class="notify-remove" data-id="@notificationItem.NotificationId"><i class="fa fa-times"></i></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                }
                                            }
                                        </div>
                                    }


                                    <!--end of notifications, begin class management-->
                                    @if (Model != null && Model.ClassEditList != null)
                                    {
                                        <div class="mypage-notifications">
                                            <h3>@Html.GetTrans(384)</h3>
                                            <table class="table table-striped table-class-manage">
                                                <tbody>

                                                    @foreach (var classItem in Model.ClassEditList)
                                                    {
                                                        <tr>
                                                            <td class="col-cover tcenter">
                                                                <img src="@ContentHelper.GetClassCoverPath(classItem.Cover, "s")" class="classcover-s">
                                                            </td>
                                                            <td class="col-name">
                                                                <h4>@(String.IsNullOrEmpty(classItem.Title) ? ResourceHelper.GetTransText(560) : classItem.Title)</h4>
                                                                <div>
                                                                    @if (classItem.IsProved.Equals(3))
                                                                    {
                                                                        <a href="#" class="btn btn-default disabled"><i class="fa fa-pencil"></i>@Html.GetTrans(451)</a>
                                                                    }
                                                                    else
                                                                    {
                                                                        <a href="@Url.Action("edit", "class", new { id = classItem.ClassId })" class="btn btn-default"><i class="fa fa-pencil"></i>@Html.GetTrans(451)</a>
                                                                    }<a href="@Url.Action("preview", "class", new { id = classItem.ClassId })" class="btn btn-default"><i class="fa fa-eye"></i>@Html.GetTrans(452)</a>
                                                                    @if (classItem.PublishStatus.Equals(1))
                                                                    {   
                                                                        <a href="#" class="btn btn-default class-share" data-title="@classItem.Title" data-classid="@classItem.ClassId"><i class="fa fa-share-alt"></i><strong>@Html.GetTrans(453)</strong></a>
                                                                    }
                                                                </div>
                                                            </td>
                                                            <td class="col-action tright vmiddle">
                                                                @if (classItem.IsProved.Equals(2))
                                                                {  
                                                                    <!--rejected-->
                                                                    <span class="label label-default">@Html.GetTrans(592)</span>
                                                                }
                                                                else if (classItem.IsProved.Equals(3))
                                                                {  
                                                                    <!--waiting for prove-->
                                                                    <span class="label label-default">@Html.GetTrans(586)</span>
                                                                }
                                                                else if (classItem.PublishStatus.Equals(0))
                                                                {   
                                                                    <!--new class-->
                                                                    <a href="@Url.Action("edit", "class", new { id = classItem.ClassId })" class="btn btn-primary">@TextContentHelper.GetClassStepText(classItem, Model.HasBasicInfo)</a>
                                                                }
                                                            </td>
                                                        </tr>
                                                    }

                                                </tbody>
                                            </table>
                                            <div class="row-fluid">
                                                <div class="span12 tright"><a href="@Url.Action("teach", "member", new { tab = 1 })">@Html.GetTrans(612)</a></div>
                                            </div>
                                        </div>
                                    }
                                    <!-- end of class management -->

                                    <div class="mypage-messages">
                                        <h3>@ViewBag.MessageTitle</h3>

                                        @if (Model.Messages != null && ViewBag.MemberInfo != null)
                                        {
                                            foreach (var message in Model.Messages)
                                            {
                                                var contactId = (message.From_Id == ViewBag.MemberInfo.MemberId) ? message.To_Id : message.From_Id;
                                            <div class="message-item">
                                                <a href="@Url.Action("chat", "message", new { id = contactId })">
                                                    <div class="row-fluid">
                                                        <div class="span1">
                                                            <span class="avatar-wrap">
                                                                <img src="@ContentHelper.GetAvatarPath(message.Avatar, "m")" class="avatar-m" />@if (Model.UnReadMessageNumDic != null) { Html.Raw(TagHelper.GetNewMessageTag(Model.UnReadMessageNumDic, message.From_Id)); }</span>
                                                        </div>
                                                        <div class="span9">
                                                            <div class="message-content"><a href="@Url.Action("chat", "message", new { id = contactId })">@Html.Raw(TagHelper.GetTextSubSting(message.MessageText, 100, true))</a></div>
                                                            <div class="message-from"><a href="@Url.Action("index", "profile", new { id = contactId })">@message.Name</a><!--<span class="gray-light"><i class="fa fa-map-marker icon-large"></i>@Html.GetTrans(464)</span>--></div>
                                                        </div>
                                                        <div class="span2 tright">
                                                            <span class="gray">@TextContentHelper.GetDateString(message.CreatedDate)</span>
                                                        </div>
                                                    </div>
                                                </a>
                                            </div>  
                                            }
                                        }

                                        <div class="row-fluid">
                                            <div class="span12 tright"><a href="@Url.Action("index", "message")">@Html.GetTrans(406)</a></div>
                                        </div>

                                    </div>
                                    <!-- end of messages -->

                                </td>
                            }

                        </tr>
                    </table>
                            if (ViewBag.ShareText1 != null)
                            {
                    <input type="hidden" id="share-text1" value="@ViewBag.ShareText1" />
                    <input type="hidden" id="share-text2" value="@ViewBag.ShareText2" />
                            }
                    <input type="hidden" id="share-socialtype" value="@ViewBag.MemberInfo.SocialType" />
                    <input type="hidden" id="share-token" value="" />
                    <input type="hidden" id="loginstatus-social" value="@ViewBag.IsSocialLogin" />
                }
            </div>
        </div>

    </div>

</div>





